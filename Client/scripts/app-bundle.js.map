{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","configure","window","regeneratorRuntime","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","loginError","message","showLogin","showRegister","user","firstName","lastName","email","password","registerError","save","console","log","serverResponse","error","login","sessionStorage","setItem","JSON","stringify","response","navigate","catch","List","todos","parse","getItem","priorities","showList","activate","getUserTodos","_id","createTodo","todoObj","description","dateDue","Date","userId","priority","saveTodo","alert","back","showlist","logout","removeItem","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","method","url","status","get","fetch","json","data","post","content","body","object","put","delete","ToDos","TODO_SERVICE","todosArray","Array","id","todo","push","Users","USER_SERVICE"],"mappings":";;;;;;;;;;;;;;MAEaA,cAAAA;;;;;kBAEXC,2CAAgBC,QAAQC,QAAQ;AAC9B,WAAKA,MAAL,GAAcA,MAAd;AACAD,aAAOE,eAAP,CAAuB,WAAvB;AACAF,aAAOG,GAAP,CAAW,CACT;AACHC,eAAO,CAAC,EAAD,EAAK,MAAL,CADJ;AAEHC,kBAAU,gBAFP;AAGHC,cAAM;AAHH,OADS,EAMT;AACHF,eAAO,MADJ;AAEHC,kBAAU,gBAFP;AAGHC,cAAM,MAHH;AAIHC,cAAM;AAJH,OANS,CAAX;AAaD;;;;;;;;;;;ACpBH,QAAIC,aAAa;AACbC,iBAAS,2BADI;AAEbC,kBAAU,cAFG;AAGbC,mBAAW,OAHE;AAIbC,oBAAY,eAJC;AAKbC,mBAAW,EALE;AAMbC,wBAAgB;AANH,KAAjB;;sBASiBN;;;;;;;;oBCTF;AACbO,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCKCC,YAAAA;;;;;;;;;;;;;;AAFhBC,SAAOC,kBAAP;;AAEO,WAASF,SAAT,CAAmBG,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,MAFH,CAEU,cAFV,EAE0B,UAACC,UAAD,EAAc;AACpCA,iBAAWP,SAAX;AACJ,KAJA,EAKGQ,OALH,CAKW,WALX;;AAOA,QAAI,sBAAYV,KAAhB,EAAuB;AACrBK,cAAQC,GAAR,CAAYK,kBAAZ;AACD;;AAED,QAAI,sBAAYV,OAAhB,EAAyB;AACvBI,cAAQC,GAAR,CAAYE,MAAZ,CAAmB,iBAAnB;AACD;;AAEDH,YAAQO,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMR,QAAQS,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MChBYC,eAAAA,eADZ;AAGC,kBAAY7B,MAAZ,EAAoB8B,KAApB,EAA2BxB,IAA3B,EAAiC;AAAA;;AAC/B,WAAKN,MAAL,GAAcA,MAAd;AACA,WAAKM,IAAL,GAAYA,IAAZ;AACA,WAAKyB,UAAL,GAAkB,EAAlB;AACA,WAAKD,KAAL,GAAaA,KAAb;AACA,WAAKE,OAAL,GAAe,MAAf;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACD;;mBAEDC,uCAAc;AACZ,WAAKC,IAAL,GAAY;AACVC,mBAAW,EADD;AAEVC,kBAAU,EAFA;AAGVC,eAAO,EAHG;AAIVC,kBAAU;AAJA,OAAZ;AAME,WAAKC,aAAL,GAAqB,EAArB;;AAEF,WAAKP,SAAL,GAAiB,KAAjB;AACD;;mBACMQ;;;;;;;AACNC,wBAAQC,GAAR,CAAa,KAAKR,IAAlB;;uBACkC,KAAKL,KAAL,CAAWW,IAAX,CAAgB,KAAKN,IAArB;;;AAAvBS;;AACJ,oBAAI,CAACA,eAAeC,KAApB,EAA2B;AACzB,uBAAKZ,SAAL,GAAiB,IAAjB;AACD,iBAFD,MAEO;AACL,uBAAKO,aAAL,GAAqB,2CAArB;AACD;;;;;;;;;;;;;;;;;mBAITM,yBAAO;AAAA;;AACL,aAAO,KAAKxC,IAAL,CAAUwC,KAAV,CAAgB,KAAKR,KAArB,EAA4B,KAAKC,QAAjC,EACNZ,IADM,CACD,oBAAY;AAChBoB,uBAAeC,OAAf,CAAuB,MAAvB,EAA+BC,KAAKC,SAAL,CAAeC,SAAShB,IAAxB,CAA/B;AACA,cAAKJ,UAAL,GAAkB,EAAlB;AACA,cAAK/B,MAAL,CAAYoD,QAAZ,CAAqB,MAArB;AACD,OALM,EAMPC,KANO,CAMD,iBAAS;AACfX,gBAAQC,GAAR,CAAYE,KAAZ;AACA,cAAKd,UAAL,GAAkB,sBAAlB;AACD,OATQ,CAAP;AAUH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC5CYuB,eAAAA,eADZ;AAEC,sBAAYtD,MAAZ,EAAoBM,IAApB,EAA0BiD,KAA1B,EAAiC;AAAA;;AAC/B,iBAAKvD,MAAL,GAAcA,MAAd;AACA,iBAAKuD,KAAL,GAAaA,KAAb;AACA,iBAAKjD,IAAL,GAAYA,IAAZ;;AAEA,iBAAK6B,IAAL,GAAYc,KAAKO,KAAL,CAAWT,eAAeU,OAAf,CAAuB,MAAvB,CAAX,CAAZ;AACA,iBAAKC,UAAL,GAAkB,CAAC,KAAD,EAAQ,QAAR,EAAkB,MAAlB,EAA0B,UAA1B,CAAlB;AACA,iBAAKC,QAAL,GAAgB,IAAhB;AACD;;uBAEKC;;;;;;;uCACE,KAAKL,KAAL,CAAWM,YAAX,CAAwB,KAAK1B,IAAL,CAAU2B,GAAlC;;;;;;;;;;;;;;;;;uBAGNC,mCAAY;AACR,iBAAKC,OAAL,GAAe;AACXT,uBAAO,EADI;AAEXU,6BAAa,EAFF;AAGXC,yBAAS,IAAIC,IAAJ,EAHE;AAIVC,wBAAQ,KAAKjC,IAAL,CAAU2B,GAJR;AAKXO,0BAAU,KAAKX,UAAL,CAAgB,CAAhB;AALC,aAAf;AAOA,iBAAKC,QAAL,GAAgB,KAAhB;AACH;;uBAGKW;;;;;;;qCACC,KAAKN;;;;;;uCACiB,KAAKT,KAAL,CAAWd,IAAX,CAAgB,KAAKuB,OAArB;;;AAAjBb;;AACJ,oCAAGA,SAASN,KAAZ,EAAkB;AACd0B,0CAAM,sCAAN;AACH,iCAFD,MAEO,CACN;AACD,qCAAKZ,QAAL,GAAgB,IAAhB;;;;;;;;;;;;;;;;;uBAIRa,uBAAM;AACF,iBAAKC,QAAL,GAAc,IAAd;AACH;;uBAEHC,2BAAQ;AACL3B,2BAAe4B,UAAf,CAA0B,MAA1B;AACA,iBAAKrE,IAAL,CAAUoE,MAAV;AAEF;;;;;;;;;;;UCpDa1D,YAAAA;AAAT,WAASA,SAAT,CAAmBjB,MAAnB,EAA2B,CAEjC;;;;;;;;;;;;;;;;;;QCEY6E,uBAAAA,uBADZ;AAGG,8BAAYC,IAAZ,EAAkB;AAAA;;AAAA;;AACd,iBAAKC,UAAL,GAAkBD,IAAlB;;AAEA,iBAAKE,QAAL,GAAgB,4BAAhB;;AAEA,iBAAKD,UAAL,CAAgB9D,SAAhB,CAA0B,kBAAU;AAChCjB,uBACKiF,WADL,CACiB,MAAKD,QADtB,EAEKE,YAFL,CAEkB;AACdC,iCAAa,aADC;AAEdC,6BAAS;AACL,kCAAU,kBADL;AAEL,4CAAoB;AAFf;AAFK,iBAFlB,EASKC,eATL,CASqB;AACjBC,2BADiB,mBACTA,QADS,EACA;AACb3C,gCAAQC,GAAR,iBAA0B0C,SAAQC,MAAlC,SAA4CD,SAAQE,GAApD;AACA,+BAAOF,QAAP;AACH,qBAJgB;AAKjBlC,4BALiB,oBAKRA,SALQ,EAKE;AACfT,gCAAQC,GAAR,eAAwBQ,UAASqC,MAAjC,SAA2CrC,UAASoC,GAApD;AACA,+BAAOpC,SAAP;AACH;AARgB,iBATrB;AAmBC,aApBL;AAuBH;;+BAEDsC,mBAAIF,KAAK;AACL,mBAAO,KAAKT,UAAL,CAAgBY,KAAhB,CAAsBH,GAAtB,EACF5D,IADE,CACG;AAAA,uBAAYwB,SAASwC,IAAT,EAAZ;AAAA,aADH,EAEFhE,IAFE,CAEG,gBAAQ;AACV,uBAAOiE,IAAP;AACH,aAJE,EAKFvC,KALE,CAKI,iBAAS;AACZ,uBAAOR,KAAP;AACH,aAPE,CAAP;AAQH;;+BAEDgD,qBAAKC,SAASP,KAAK;AACf,mBAAO,KAAKT,UAAL,CACFY,KADE,CACIH,GADJ,EACS;AACRD,wBAAQ,MADA;AAERS,sBAAM,8BAAKD,OAAL;AAFE,aADT,EAKFnE,IALE,CAKG;AAAA,uBAAYwB,SAASwC,IAAT,EAAZ;AAAA,aALH,EAMFhE,IANE,CAMG,kBAAU;AACZ,uBAAOqE,MAAP;AACH,aARE,EASF3C,KATE,CASI,iBAAS;AACZ,uBAAOR,KAAP;AACH,aAXE,CAAP;AAYH;;+BAEDoD,mBAAIH,SAASP,KAAK;AACd,mBAAO,KAAKT,UAAL,CACFY,KADE,CACIH,GADJ,EACS;AACRD,wBAAQ,KADA;AAERS,sBAAM,8BAAKD,OAAL;AAFE,aADT,EAKFnE,IALE,CAKG;AAAA,uBAAYwB,SAASwC,IAAT,EAAZ;AAAA,aALH,EAMFhE,IANE,CAMG,kBAAU;AACZ,uBAAOqE,MAAP;AACH,aARE,EASF3C,KATE,CASI,iBAAS;AACZ,uBAAOR,KAAP;AACH,aAXE,CAAP;AAYH;;+BAEDqD,0BAAOX,KAAK;AACR,mBAAO,KAAKT,UAAL,CACFY,KADE,CACIH,GADJ,EACS;AACRD,wBAAQ;AADA,aADT,EAIF3D,IAJE,CAIG;AAAA,uBAAYwB,SAASwC,IAAT,EAAZ;AAAA,aAJH,EAKFhE,IALE,CAKG,kBAAU;AACZ,uBAAOqE,MAAP;AACH,aAPE,EAQF3C,KARE,CAQI,iBAAS;AACZ,uBAAOR,KAAP;AACH,aAVE,CAAP;AAWH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCrFQsD,gBAAAA,gBADZ;AAEG,uBAAYP,IAAZ,EAAkB;AAAA;;AACN,iBAAKA,IAAL,GAAYA,IAAZ;AACA,iBAAKQ,YAAL,GAAoB,OAApB;AACA,iBAAKC,UAAL,GAAiB,IAAIC,KAAJ,EAAjB;AACN;;wBAEJzC;kFAAa0C;;;;;;;uCACM,KAAKX,IAAL,CAAUH,GAAV,CAAc,KAAKW,YAAL,GAAoB,QAApB,GAA+BG,EAA7C;;;AAAjBpD;;AACJ,oCAAG,CAACA,SAASN,KAAV,IAAmB,CAACM,SAASnB,OAAhC,EAAwC;AACpC,yCAAKqE,UAAL,GAAkBlD,QAAlB;AACH;;;;;;;;;;;;;;;;;wBAGCV;oFAAK+D;;;;;;qCACJA;;;;;;uCACwB,KAAKZ,IAAL,CAAUC,IAAV,CAAeW,IAAf,EAAqB,KAAKJ,YAA1B;;;AAAvBxD;;AACJ,oCAAG,CAACA,eAAeC,KAAnB,EAAyB;AACrB,yCAAKwD,UAAL,CAAgBI,IAAhB,CAAqB7D,cAArB;AACH;kEACMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCpBE8D,gBAAAA,gBADZ;AAGD,uBAAYd,IAAZ,EAAkB;AAAA;;AACV,iBAAKA,IAAL,GAAYA,IAAZ;;AAEA,iBAAKe,YAAL,GAAoB,OAApB;AACH;;wBAEClE;kFAAKN;;;;;;qCACJA;;;;;;uCAC4B,KAAKyD,IAAL,CAAUC,IAAV,CAAe1D,IAAf,EAAqB,KAAKwE,YAA1B;;;AAAvB/D;iEACIA","file":"app-bundle.js","sourcesContent":["import {AuthorizeStep} from 'aurelia-auth';\n\nexport class App {\n\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep('authorize', AuthorizeStep); \n    config.map([\n      { \n   route: ['', 'home'],\n   moduleId: './modules/home',\n   name: 'Home' \n      },\n      {\n   route: 'list',\n   moduleId: './modules/list',\n   name: 'List', \n   auth: true \n     }\n    ]);\n  }\n}\n","var authConfig = {\r\n    baseUrl: \"http://localhost:5000/api\",\r\n    loginUrl: '/users/login',\r\n    tokenName: 'token',\r\n    authHeader: 'Authorization',\r\n    authToken: '',\r\n    logoutRedirect: '#/home'\r\n  }\r\n  \r\n  export default authConfig;\r\n  ","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport regeneratorRuntime from 'regenerator-runtime';\nimport config from './auth-config';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig)=>{\n      baseConfig.configure(config);\n })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework'; \r\nimport {Router} from 'aurelia-router';\r\nimport { Users } from '../resources/data/users';   \r\nimport {AuthService} from 'aurelia-auth';  \r\n\r\n@inject(Router, Users, AuthService)\r\nexport class Home {\r\n\r\n  constructor(router, users, auth) {\r\n    this.router = router;\r\n    this.auth = auth;\r\n    this.loginError = '';     \r\n    this.users = users;\r\n    this.message = 'Home';\r\n    this.showLogin = true;\r\n  }\r\n\r\n  showRegister(){\r\n    this.user = {\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      email: \"\",\r\n      password: \"\"\r\n      }\r\n      this.registerError = \"\";\r\n      \r\n    this.showLogin = false;\r\n  }\r\n   async save() {\r\n   console.log (this.user);\r\n          let serverResponse = await this.users.save(this.user);\r\n          if (!serverResponse.error) {\r\n            this.showLogin = true;\r\n          } else {\r\n            this.registerError = \"There was a problem registering the user.\"\r\n          }\r\n    }\r\n        \r\n\r\n  login(){\r\n    return this.auth.login(this.email, this.password)\r\n    .then(response => {\r\n      sessionStorage.setItem(\"user\", JSON.stringify(response.user));\r\n      this.loginError = \"\";  \r\n      this.router.navigate('list');\r\n    })\r\n   .catch(error => {\r\n    console.log(error);\r\n    this.loginError = \"Invalid credentials.\";\r\n  });\r\n};\r\n\r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {ToDos} from '../resources/data/todos';    \r\nimport {Router} from 'aurelia-router';\r\nimport { AuthService } from 'aurelia-auth';    \r\n\r\n@inject(Router, AuthService, ToDos)\r\nexport class List {\r\n  constructor(router, auth, todos) {\r\n    this.router = router;\r\n    this.todos = todos;\r\n    this.auth = auth;\r\n\r\n    this.user = JSON.parse(sessionStorage.getItem('user'));\r\n    this.priorities = ['Low', 'Medium', 'High', 'Critical'];\r\n    this.showList = true;\r\n  }\r\n\r\n  async activate(){\r\n    await this.todos.getUserTodos(this.user._id);\r\n}\r\n\r\n    createTodo(){   \r\n        this.todoObj = {\r\n            todos: \"\",\r\n            description: \"\",\r\n            dateDue: new Date(),\r\n             userId: this.user._id,\r\n            priority: this.priorities[0]\r\n        }\r\n        this.showList = false;      \r\n    }\r\n\r\n    \r\n    async saveTodo(){\r\n        if(this.todoObj){       \r\n            let response = await this.todos.save(this.todoObj);\r\n            if(response.error){\r\n                alert(\"There was an error creating the ToDo\");\r\n            } else {\r\n            }\r\n            this.showList = true;\r\n        }\r\n    }\r\n\r\n    back(){\r\n        this.showlist=true;\r\n    }\r\n\r\n  logout(){\r\n     sessionStorage.removeItem('user');\r\n     this.auth.logout();\r\n\r\n  }\r\n}\r\n\r\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import { inject } from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class DataServices {\r\n\r\n    constructor(http) {\r\n        this.httpClient = http;\r\n\r\n        this.BASE_URL = \"http://localhost:5000/api/\";\r\n\r\n        this.httpClient.configure(config => {\r\n            config\r\n                .withBaseUrl(this.BASE_URL)\r\n                .withDefaults({\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'X-Requested-With': 'Fetch'\r\n                }\r\n                })\r\n                .withInterceptor({\r\n                request(request) {\r\n                    console.log(`Requesting ${request.method} ${request.url}`);\r\n                    return request;\r\n                },\r\n                response(response) {\r\n                    console.log(`Received ${response.status} ${response.url}`);\r\n                    return response;\r\n                }\r\n                });\r\n            });\r\n\r\n            \r\n    }\r\n\r\n    get(url) {\r\n        return this.httpClient.fetch(url)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                return data;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    post(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                method: 'post',\r\n                body: json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    put(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                method: 'put',\r\n                body: json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    delete(url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                method: 'delete'\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error ;\r\n            });\r\n    }\r\n\r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class ToDos {\r\n    constructor(data) {\r\n                this.data = data;\r\n                this.TODO_SERVICE = 'todos';\r\n                this.todosArray= new Array ();\r\n         }\r\n\r\nasync getUserTodos(id){\r\n    let response = await this.data.get(this.TODO_SERVICE + \"/user/\" + id);\r\n    if(!response.error && !response.message){\r\n        this.todosArray = response;\r\n    }\r\n} \r\n\r\nasync save(todo){\r\n    if(todo){\r\n    let serverResponse = await this.data.post(todo, this.TODO_SERVICE);\r\n    if(!serverResponse.error){\r\n        this.todosArray.push(serverResponse);\r\n    }\r\n    return serverResponse;\r\n    }\r\n}\r\n\r\n    \r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class Users {\r\n    \r\nconstructor(data) {\r\n        this.data = data;\r\n\r\n        this.USER_SERVICE = 'users';\r\n    }\r\n\r\nasync save(user){\r\n    if(user){\r\n        let serverResponse = await this.data.post(user, this.USER_SERVICE);\r\n         return serverResponse;\r\n }\r\n}\r\n\r\n}\r\n"],"sourceRoot":".."}